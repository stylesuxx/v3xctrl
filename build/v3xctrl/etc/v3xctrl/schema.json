{
  "title": "Configuration",
  "type": "object",
  "options": {
    "disable_collapse": true,
    "disable_edit_json": true,
    "disable_properties": true
  },
  "properties": {
    "host": {
      "propertyOrder": 10,
      "type": "string",
      "description": "Preferably IP address or hostname if you don't have a static IP",
      "default": "192.168.0.1"
    },
    "ports": {
      "propertyOrder": 20,
      "type": "object",
      "title": "Ports",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "video": {
          "propertyOrder": 10,
          "type": "integer",
          "default": 6666,
          "description": "The port to which video will be streamed to"
        },
        "control": {
          "propertyOrder": 20,
          "type": "integer",
          "default": 6668,
          "description": "The port for the bi-directional control channel"
        },
        "webinterface": {
          "propertyOrder": 30,
          "type": "integer",
          "default": 5000,
          "description": "The port on which this interface should be running (requires reboot)"
        }
      }
    },
    "video": {
      "propertyOrder": 30,
      "type": "object",
      "title": "Video",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "width": {
          "propertyOrder": 10,
          "type": "integer",
          "default": 1280
        },
        "height": {
          "propertyOrder": 20,
          "type": "integer",
          "default": 720
        },
        "framerate": {
          "propertyOrder": 30,
          "type": "integer",
          "default": 30,
          "description": "In frames/second (FPS)"
        },
        "iFramePeriod": {
          "propertyOrder": 40,
          "type": "integer",
          "default": 30,
          "description": "Amount of frames between I frames"
        },
        "bitrate": {
          "propertyOrder": 50,
          "type": "integer",
          "default": 1800000,
          "description": "Bits per second"
        },
        "record": {
          "propertyOrder": 60,
          "type": "boolean",
          "format": "checkbox",
          "default": false,
          "description": "Record video stream to the client (make sure to use a high quality SD card)"
        },
        "recordPath": {
          "propertyOrder": 70,
          "type": "string",
          "default": "/data/recordings",
          "description": "Path to store recordings"
        },
        "testSource": {
          "propertyOrder": 80,
          "type": "boolean",
          "format": "checkbox",
          "default": true,
          "description": "Use test source instead of camera - great for debugging"
        }
      }
    },
    "wifi": {
      "propertyOrder": 35,
      "type": "object",
      "title": "WiFi",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "mode": {
          "type": "string",
          "required": true,
          "enum": [
            "client",
            "ap"
          ],
          "description": "In client mode, the device will connect to the configured network. In access-point mode, the device will spawn it's own WiFi network to which you can connect"
        },
        "routing": {
          "type": "string",
          "required": true,
          "enum": [
            "wlan",
            "rndis"
          ],
          "description": "Which device should be used to route internet traffic. During setup use wlan and switch to rndis once everything ist setup and tested"
        }
      }
    },
    "autostart": {
      "propertyOrder": 40,
      "type": "object",
      "title": "Autostart",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "description": "Before enabling autostart, make sure that the services work fine when started manually.",
      "properties": {
        "video": {
          "propertyOrder": 10,
          "type": "boolean",
          "format": "checkbox",
          "default": true,
          "description": "Automatically start video stream after boot"
        },
        "control": {
          "propertyOrder": 20,
          "type": "boolean",
          "format": "checkbox",
          "default": true,
          "description": "Automatically start control channel after boot"
        }
      }
    },
    "controls": {
      "propertyOrder": 50,
      "type": "object",
      "title": "Controls",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "throttle": {
          "propertyOrder": 10,
          "type": "object",
          "title": "Throttle",
          "options": {
            "collapsed": false,
            "disable_edit_json": true,
            "disable_properties": true
          },
          "properties": {
            "min": {
              "propertyOrder": 10,
              "type": "integer",
              "default": 1000,
              "description": "Minimum pulse width"
            },
            "max": {
              "propertyOrder": 20,
              "type": "integer",
              "default": 2000,
              "description": "Maximum pulse width"
            },
            "failsafe": {
              "propertyOrder": 30,
              "type": "integer",
              "default": 1000,
              "description": "Pulse width when failsafe"
            }
          }
        },
        "steering": {
          "propertyOrder": 20,
          "type": "object",
          "title": "Steering",
          "options": {
            "collapsed": false,
            "disable_edit_json": true,
            "disable_properties": true
          },
          "properties": {
            "propertyOrder": 10,
            "min": {
              "type": "integer",
              "default": 1000,
              "description": "Minimum pulse width"
            },
            "max": {
              "propertyOrder": 20,
              "type": "integer",
              "default": 2000,
              "description": "Maximum pulse width"
            },
            "failsafe": {
              "propertyOrder": 30,
              "type": "integer",
              "default": 1500,
              "description": "Pulse width when failsafe"
            },
            "trim": {
              "propertyOrder": 40,
              "type": "integer",
              "default": 0,
              "description": "Pulse width for trim"
            }
          }
        },
        "failsafeTimeout": {
          "propertyOrder": 30,
          "type": "integer",
          "default": 3,
          "description": "After this many seconds without a control packet, failsafe is triggered"
        }
      }
    },
    "extras": {
      "propertyOrder": 60,
      "type": "object",
      "title": "Extras",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "samba": {
        "propertyOrder": 10,
        "type": "boolean",
        "format": "checkbox",
        "default": false,
        "description": "Enable SAMBA network share for recording directory"
      }
  }
}