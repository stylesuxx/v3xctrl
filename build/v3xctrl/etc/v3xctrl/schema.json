{
  "title": "Configuration",
  "type": "object",
  "options": {
    "disable_collapse": true,
    "disable_edit_json": true,
    "disable_properties": true
  },
  "properties": {
    "server": {
      "propertyOrder": 10,
      "title": "Server",
      "type": "object",
      "options": {
        "collapsed": false,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "mode": {
          "propertyOrder": 10,
          "title": "Connection Mode",
          "type": "string",
          "enum": ["direct", "rendezvous"],
          "required": true,
          "default": "direct",
          "description": "Choose how the client connects to the server."
        },
        "host": {
          "propertyOrder": 20,
          "type": "string",
          "title": "Host",
          "default": "192.168.0.1",
          "description": "Used in direct mode only"
        },
        "rendezvousId": {
          "propertyOrder": 30,
          "type": "string",
          "title": "Rendezvous ID",
          "default": "foobar",
          "description": "Needs to be the same on client and server"
        },
        "rendezvousServer": {
          "propertyOrder": 40,
          "type": "string",
          "title": "Rendezvous Server",
          "default": "rendezvous.websium.at",
          "description": "Used in rendezvous mode only (only change if you are using your own rendezvous server)"
        }
      }
    },
    "ports": {
      "propertyOrder": 20,
      "type": "object",
      "title": "Ports",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "video": {
          "propertyOrder": 10,
          "type": "integer",
          "default": 6666,
          "description": "The port to which video will be streamed to"
        },
        "control": {
          "propertyOrder": 20,
          "type": "integer",
          "default": 6668,
          "description": "The port for the bi-directional control channel"
        },
        "webinterface": {
          "propertyOrder": 30,
          "type": "integer",
          "default": 5000,
          "description": "The port on which this interface should be running (requires reboot)"
        }
      }
    },
    "video": {
      "propertyOrder": 30,
      "type": "object",
      "title": "Video",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "width": {
          "propertyOrder": 10,
          "type": "integer",
          "default": 1280
        },
        "height": {
          "propertyOrder": 20,
          "type": "integer",
          "default": 720
        },
        "framerate": {
          "propertyOrder": 30,
          "type": "integer",
          "default": 30,
          "description": "In frames/second (FPS)"
        },
        "iFramePeriod": {
          "propertyOrder": 40,
          "type": "integer",
          "default": 15,
          "description": "Amount of frames between I frames"
        },
        "bitrate": {
          "propertyOrder": 50,
          "type": "integer",
          "default": 1800000,
          "description": "Bits per second"
        },
        "record": {
          "propertyOrder": 60,
          "type": "boolean",
          "format": "checkbox",
          "default": false,
          "description": "Record video stream to the client (make sure to use a high quality SD card)"
        },
        "recordPath": {
          "propertyOrder": 70,
          "type": "string",
          "default": "/data/recordings",
          "description": "Path to store recordings"
        },
        "testSource": {
          "propertyOrder": 80,
          "type": "boolean",
          "format": "checkbox",
          "default": true,
          "description": "Use test source instead of camera - great for debugging"
        }
      }
    },
    "wifi": {
      "propertyOrder": 35,
      "type": "object",
      "title": "WiFi",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "mode": {
          "type": "string",
          "required": true,
          "enum": [
            "client",
            "ap"
          ],
          "description": "In client mode, the device will connect to the configured network. In access-point mode, the device will spawn it's own WiFi network to which you can connect"
        },
        "routing": {
          "type": "string",
          "required": true,
          "enum": [
            "wlan",
            "rndis"
          ],
          "description": "Which device should be used to route internet traffic. During setup use wlan and switch to rndis once everything ist setup and tested"
        }
      }
    },
    "autostart": {
      "propertyOrder": 40,
      "type": "object",
      "title": "Autostart",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "description": "Before enabling autostart, make sure that the services work fine when started manually.",
      "properties": {
        "video": {
          "propertyOrder": 10,
          "type": "boolean",
          "format": "checkbox",
          "default": true,
          "description": "Automatically start video stream after boot"
        },
        "control": {
          "propertyOrder": 20,
          "type": "boolean",
          "format": "checkbox",
          "default": true,
          "description": "Automatically start control channel after boot"
        }
      }
    },
    "controls": {
      "propertyOrder": 50,
      "type": "object",
      "title": "Controls",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "throttle": {
          "propertyOrder": 10,
          "type": "object",
          "title": "Throttle",
          "options": {
            "collapsed": false,
            "disable_edit_json": true,
            "disable_properties": true
          },
          "properties": {
            "min": {
              "propertyOrder": 10,
              "type": "integer",
              "default": 1000,
              "description": "Minimum pulse width"
            },
            "max": {
              "propertyOrder": 20,
              "type": "integer",
              "default": 2000,
              "description": "Maximum pulse width"
            },
            "failsafe": {
              "propertyOrder": 30,
              "type": "integer",
              "default": 1000,
              "description": "Pulse width when failsafe"
            },
            "idle": {
              "propertyOrder": 40,
              "type": "integer",
              "default": 1200,
              "description": "Pulsewidth for throttle position between forwards and brake/backwards"
            },
            "scaleForward": {
              "propertyOrder": 50,
              "type": "integer",
              "default": 100,
              "minimum": 1,
              "maximum": 100,
              "description": "Scales the throttle forward range as a percentage of the maximum possible value"
            },
            "scaleReverse": {
              "propertyOrder": 60,
              "type": "integer",
              "default": 100,
              "minimum": 1,
              "maximum": 100,
              "description": "Scales the throttle reverse range as a percentage of the maximum possible value"
            }
          }
        },
        "steering": {
          "propertyOrder": 20,
          "type": "object",
          "title": "Steering",
          "options": {
            "collapsed": false,
            "disable_edit_json": true,
            "disable_properties": true
          },
          "properties": {
            "min": {
              "propertyOrder": 10,
              "type": "integer",
              "default": 1000,
              "description": "Minimum pulse width"
            },
            "max": {
              "propertyOrder": 20,
              "type": "integer",
              "default": 2000,
              "description": "Maximum pulse width"
            },
            "failsafe": {
              "propertyOrder": 30,
              "type": "integer",
              "default": 1500,
              "description": "Pulse width when failsafe"
            },
            "trim": {
              "propertyOrder": 40,
              "type": "integer",
              "default": 0,
              "description": "Pulse width for trim"
            },
            "scale": {
              "propertyOrder": 50,
              "title": "Scale (in percent)",
              "type": "integer",
              "default": 100,
              "minimum": 1,
              "maximum": 100,
              "description": "Scales the steering output range as a percentage of the maximum possible value"
            },
            "invert": {
              "propertyOrder": 60,
              "title": "Invert steering",
              "type": "boolean",
              "format": "checkbox",
              "default": false,
              "description": "Invert steering direction"
            }
          }
        },
        "failsafeTimeout": {
          "propertyOrder": 30,
          "type": "integer",
          "default": 3,
          "description": "After this many seconds without a control packet, failsafe is triggered"
        }
      }
    },
    "modem": {
      "propertyOrder": 60,
      "type": "object",
      "title": "Modem",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "path": {
          "propertyOrder": 10,
          "title": "Path",
          "type": "string",
          "description": "Path to the modem device",
          "default": "/dev/ttyACM0"
        }
      }
    },
    "extras": {
      "propertyOrder": 70,
      "type": "object",
      "title": "Extras",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "samba": {
          "title": "SAMBA",
          "propertyOrder": 10,
          "type": "boolean",
          "format": "checkbox",
          "default": false,
          "description": "Enable SAMBA network share for recording directory"
        },
        "logLevel": {
          "title": "Log Level",
          "propertyOrder": 20,
          "type": "string",
          "required": true,
          "default": "ERROR",
          "enum": [
            "CRITICAL",
            "ERROR",
            "WARNING",
            "INFO",
            "DEBUG"
          ]
        }
      }
    }
  }
}