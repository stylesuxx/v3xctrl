#! /bin/bash
# Start video and control services if autostart is enabled
CONFIG_PATH="/etc/rc-client/config.json"

VIDEO_SERVICE="rc-transmit-camera"
CONTROL_SERVICE="rc-control"

START_VIDEO=$(jq -r '.autostart.video' "$CONFIG_PATH")
START_CONTROL=$(jq -r '.autostart.control' "$CONFIG_PATH")

if [ "$START_VIDEO" = "true" ] then
  echo "Starting video service..."
  systemctl start "$VIDEO_SERVICE"
fi

if [ "$START_CONTROL" = "true" ] then
  echo "Starting control service..."
  systemctl start "$CONTROL_SERVICE"
fi

exit 0
