{
  "title": "Configuration",
  "type": "object",
  "options": {
    "disable_collapse": true,
    "disable_edit_json": true,
    "disable_properties": true
  },
  "properties": {
    "host": {
      "propertyOrder": 10,
      "type": "string",
      "description": "Preferably IP address or hostname if you don't have a static IP",
      "default": "192.168.0.1"
    },
    "ports": {
      "propertyOrder": 20,
      "type": "object",
      "title": "Ports",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "video": {
          "type": "integer",
          "default": 6666,
          "description": "The port for the control channel"
        },
        "control": {
          "type": "integer",
          "default": 6667,
          "description": "The port to which video will be streamed to"
        },
        "webinterface": {
          "type": "integer",
          "default": 5000,
          "description": "The port on which this interface should be running (requires reboot)"
        }
      }
    },
    "video": {
      "propertyOrder": 30,
      "type": "object",
      "title": "Video",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "width": {
          "propertyOrder": 10,
          "type": "integer",
          "default": 1280
        },
        "height": {
          "propertyOrder": 20,
          "type": "integer",
          "default": 720
        },
        "framerate": {
          "propertyOrder": 30,
          "type": "integer",
          "default": 30,
          "description": "FPS"
        },
        "bitrate": {
          "propertyOrder": 40,
          "type": "integer",
          "default": 3000000,
          "description": "Bits per second"
        },
        "record": {
          "propertyOrder": 50,
          "type": "boolean",
          "format": "checkbox",
          "default": false
        },
        "recordPath": {
          "propertyOrder": 60,
          "type": "string",
          "description": "Path to store recordings",
          "default": "/var/lib/rc-client/recordings"
        },
        "testSource": {
          "propertyOrder": 70,
          "type": "boolean",
          "format": "checkbox",
          "default": false,
          "description": "Use test source instead of camere - great for debugging"
        }
      }
    },
    "wifi": {
      "propertyOrder": 35,
      "type": "object",
      "title": "WiFi",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "mode": {
          "type": "string",
          "required": true,
          "enum": [
            "client",
            "ap"
          ],
          "description": "In client mode, the device will connect to the configured network. In access-point mode, the device will spawn it's own WiFi network to which you can connect"
        },
        "routing": {
          "type": "string",
          "required": true,
          "enum": [
            "wlan",
            "rndis"
          ],
          "description": "Which device should be used to route internet traffic. During setup use wlan and switch to rndis once everything ist setup and tested"
        }
      }
    },
    "autostart": {
      "propertyOrder": 40,
      "type": "object",
      "title": "Autostart",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "video": {
          "type": "boolean",
          "format": "checkbox",
          "default": true
        },
        "control": {
          "type": "boolean",
          "format": "checkbox",
          "default": true
        }
      }
    },
    "controls": {
      "propertyOrder": 50,
      "type": "object",
      "title": "Controls",
      "options": {
        "collapsed": true,
        "disable_edit_json": true,
        "disable_properties": true
      },
      "properties": {
        "throttle": {
          "propertyOrder": 10,
          "type": "object",
          "title": "Throttle",
          "options": {
            "collapsed": false,
            "disable_edit_json": true,
            "disable_properties": true
          },
          "properties": {
            "min": {
              "propertyOrder": 10,
              "type": "integer",
              "default": 1000,
              "description": "Minimum pulse width"
            },
            "max": {
              "propertyOrder": 20,
              "type": "integer",
              "default": 2000,
              "description": "Maximum pulse width"
            },
            "failsafe": {
              "propertyOrder": 30,
              "type": "integer",
              "default": 1000,
              "description": "Pulse width when failsafe"
            }
          }
        },
        "steering": {
          "propertyOrder": 20,
          "type": "object",
          "title": "Steering",
          "options": {
            "collapsed": false,
            "disable_edit_json": true,
            "disable_properties": true
          },
          "properties": {
            "propertyOrder": 10,
            "min": {
              "type": "integer",
              "default": 1000,
              "description": "Minimum pulse width"
            },
            "max": {
              "propertyOrder": 20,
              "type": "integer",
              "default": 2000,
              "description": "Maximum pulse width"
            },
            "failsafe": {
              "propertyOrder": 30,
              "type": "integer",
              "default": 1500,
              "description": "Pulse width when failsafe"
            }
          }
        },
        "failsafeTimeout": {
          "propertyOrder": 30,
          "type": "integer",
          "default": 3,
          "description": "After this many seconds without a control packet, failsafe is triggered"
        }
      }
    }
  }
}